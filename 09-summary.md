\bookmarksetup{startatroot}
\addtocontents{toc}{\partseparator}

# Conclusions and Future Work {#ch:09}

<span class="newthought">This thesis</span> has been devoted to the study of the energy efficiency of mobile user devices at multiple layers by means of experimentation, mathematical modelling and simulation. Although the latter two methods are important tools for science in general, and for this field in particular, we must emphasise the complexity and paramount importance of experimentation.

<span class="newthought">In a preeminent experimental part</span> that has served as a basis for the rest of the thesis, we have assembled a comprehensive energy measurement framework, and a robust methodology, which is capable of measuring a wide range of wireless devices, as well as individual components, with high accuracy and precision. A whole-device parametrisation has been presented and validated against previous results from @Serrano2014. Similarly, a precise characterisation of a commercial off-the-shelf wireless card has been used to produce several contributions and insights throughout this thesis.

In connection with the aforementioned methodology, measurement handling has been systematised into `errors` [@contrib-03], a lightweight R package that associates standard uncertainty metadata to numeric vectors, matrices and arrays. The resulting data type automatically handles propagation of uncertainty through a first-order Taylor series method, and provides a formally sound representation of measurements. Using this package makes the process of computing indirect measurements easier and less error-prone.

<span class="newthought">Building on this</span> measurement platform, we have delved into the energy consumption of the kernel cross-factor, an energy toll produced by frame processing within the devices' network stack. Our whole-device measurements on a laptop computer have provided several fundamental insights [@contrib-04a;@contrib-04b] on this matter. Firstly, we have identified the CPU as the leading cause of the energy consumption, discarding the RAM memory as a significant component for this kind of device. Secondly, we have demonstrated that the CPU's C-state management system plays a central role in such consumption behaviour. In fact, the characterisation of the cross-factor is much more complex that the previous work showed. Specifically, the consumption depends on the C-state residence times, which in turn depend on the wake-up rate produced by software and hardware interrupts.

As a consequence, the cross-factor's linear behaviour disappears for CPUs with more than a single C-state, which is the case for many devices (laptop computers, smartphones, tablets...). Therefore, the energy model by @Serrano2014 cannot be applied to such devices. The energy consumption cannot be explained as increments on top of a baseline power, but as savings from a maximum consumption in a saturated state. This fact poses doubts on the applicability of such energy model on devices with sophisticated CPUs, since the savings achieved and the level of non-linearity strongly depend on the device's general state (i.e., on how the CPU is stressed: number of applications running and type of load). Nevertheless, some practices and recommendations related to packet batching still hold, because longer loads with fewer interruptions lead to longer inactivity periods that can be leveraged by deeper sleep states.

Moreover, the methodology to perform energy breakdowns by dropping packets inside the transmission chain is no longer valid for such CPUs, because this method generates a varying rate of interrupts. Therefore, further research is needed to produce novel measurement methodologies to fully understand the key role of the C-state subsystem in the energy consumption of protocol stacks.

<span class="newthought">We then turned</span> our attention to lower levels of the communication stack to revisit the behaviour of idle 802.11 interfaces. We have studied a commercial wireless card to understand the timing constraints that its architecture poses on state changes (i.e., from idle to sleep state and back to normal operation). This characterisation sets fundamental limits for any energy-efficiency mechanism based on powering down the wireless interface, and serves as a basis for the development of practical algorithms.

Based on this, we have analysed and unveiled the practical challenges of the micro-sleep opportunities that are available in current WLANs. A comprehensive discussion demarcates all the conditions that must be met to leverage packet overhearing as a source of energy savings without breaking the 802.11 standard. Furthermore, these conditions have been fine-tuned based on practical issues (e.g., capture effect) not previously considered in prior work.

Building on this knowledge, we have proposed [@contrib-05a] and patented [@contrib-05b] $\mu$Nap a standard-compliant and incrementally-deployable energy-saving scheme that is orthogonal to existing standard PS mechanisms. Unlike previous attempts, our scheme takes into account the non-zero time and energy required to move back and forth between the active and sleep states, and decides when to put the interface to sleep in order to make the most of these opportunities while avoiding frame losses.

We have demonstrated the feasibility of our approach through trace-based simulation showing that, despite the limitations of COTS hardware, the use of our scheme would result in a 57% reduction in the time spent in overhearing, thus leading to an energy saving of 15.8% of the activity time.

<span class="newthought">At a higher level</span> of the communication stack, we have revisited 802.11 rate adaptation (RA) and transmission power control (TPC) from the energy standpoint. Previous studies pointed out that MIMO rate adaptation under 802.11n poses a trade-off between throughput and energy efficiency maximisation. We have in turn demonstrated with an analytical model that, even for single spatial streams without interfering traffic, these are competing objectives.

Our findings [@contrib-06] show that RA-TPC techniques may incur inefficiencies at mode transitions, which suggests that small goodput degradations may lead to energy efficiency gains. Several heuristics have been provided and discussed to manage those transitions in an energy-efficient manner. We have shown that transitions leading to a lower rate and transmission power are particularly challenging, as they imply predicting channel quality drops to trigger early transitions.

We have extended [@contrib-07] these results by simulating several state-of-the-art RA-TPC algorithms and assessing their performance at mode transitions. The metric developed for such comparison confirms that certain *conservativeness* can resolve the trade-off between throughput and energy efficiency optimality, thus making a difference for properly designed energy-aware algorithms. Future work may delve into the proper heuristics to leverage these findings to develop novel energy-aware RA-TPC algorithms.

<span class="newthought">Finally</span>, our research experience on simulations with highly complex network simulators pointed us towards the need for new less-specialised tools enabling easier and faster prototyping. As a result, we have developed `simmer` [@contrib-08a], an easy-to-use yet powerful process-oriented and trajectory-based discrete-event simulation framework for R. This package combines a flexible API and a robust and fast simulation core written in C++ with automatic monitoring capabilities, which enables the user to focus on the system model.

\pagebreak

We have demonstrated [@contrib-08b] the usability and suitability of `simmer` for fast prototyping of a 5G-inspired scenario, which consists of the energy modelling of thousands of IoT metering devices connected to an LTE macrocell. The model developed highlights in just a few lines of code the main characteristics that make `simmer` attractive for researchers and practitioners in communications research.

<span class="newthought">Future work</span> may include the application of the methodologies developed and lessons learned in this thesis to a wider range of battery-powered devices. Particularly, the Internet-of-Things has been receiving an increased attention, and the market of wearable devices as well as sensor networks for smart cities and smart homes is growing fast. All these devices are aimed at very specific tasks, and thus they share simplicity in terms of hardware and software architecture. As a result, the linear model can be applied to describe the energy behaviour of such devices, and the measurement methodologies developed in this work are well-suited for a complete characterisation.

Within the scope of more sophisticated devices such as smartphones or laptop computers, new energy models specifically focused on modern CPUs are needed, which should be parametrised in terms of the workload. But we have shown that the total workload, understood as pure CPU cycles, is not as important as the type of workload, namely, its segmentation over time. Future lines of research may include working on CPU governor algorithms to get the best of each idle period, as well as developing buffered system calls and mechanisms to minimise the amount of interrupts per bit.

Regarding 802.11, this thesis points towards new directions to evaluate existing RA-TPC schemes in terms of energy efficiency, as well as to develop novel energy-aware RA-TPC algorithms. Furthermore, the constant evolution of the standard requires a sustained effort to fine-tune the energy consumption of a growing set of features.

But beyond 802.11, this work can be further developed and applied to other wireless access technologies such as LTE, which is in turn evolving to support the fifth-generation of mobile networks. The centralised nature of these networks poses new challenges, but also opens up new opportunities: savings may not only be achieved in the protocol itself, but also in the scheduling algorithms that are needed to share the radio resources.

Finally, although it has been assumed based on prior work that the energy consumption of 3G and 4G interfaces is higher than the consumption of 802.11 interfaces, this may not be the case in 5G. As the efficiency gap closes, further research is needed in order to achieve an optimal use, also in terms of energy, of the available technologies.
